{% extends "layout.html" %}
{% import "bootstrap/wtf.html" as wtf %}

{% block title %}
Demo App
{% endblock %}


{% block styles %}
{{super()}}

<link rel="stylesheet" href="{{url_for('.static', filename='starter-template.css')}}">
<link rel="stylesheet" href="{{url_for('.static', filename='change_profile.css')}}">
<script type="text/javascript" src="{{ url_for("static",filename="change_profile.js") }}" charset="UTF-8"></script>
<script>
function upload_avatar() {
    x = document.getElementById('avatar');
    var file = x.files[0];
    var formData = new FormData();
    formData.append('file', file, file.name);

    var xhr = new XMLHttpRequest();
    var url = "/really_change";

    xhr.open("POST", url, true);
    xhr.onload = function() {
    if (xhr.status === 200) {
        document.getElementById("img-preview").innerHTML=["<img scr='", xhr.responseText, "'/>"].join('');
    } else {
        alert('An error occurred, upload failed!');
    }
    };
    xhr.send(formData);
}
</script>
{% endblock %}




{% block content %}


<div class="container">
    <div class="starter-template">
<h1>Change Avatar Picture</h1>
      <br>
      <br>
      <br>

      <center>
<div class="profile" align="center">
    <input type="file"  accept="image/*" id="avatar">
{#            <div class="photo__helper">#}
{#                <div class="photo__frame photo__frame--circle">#}
{#                    <canvas class="photo__canvas"></canvas>#}
{#                    <div class="message is-empty">#}
{#                        <p class="message--desktop">Drop your photo here or browse your computer.</p>#}
{#                        <p class="message--mobile">Tap here to select your picture.</p>#}
{#                    </div>#}
{#                    <div class="message is-loading">#}
{#                        <i class="fa fa-2x fa-spin fa-spinner"></i>#}
{#                    </div>#}
{#                    <div class="message is-dragover">#}
{#                        <i class="fa fa-2x fa-cloud-upload"></i>#}
{#                        <p>Drop your photo</p>#}
{#                    </div>#}
{#                    <div class="message is-wrong-file-type">#}
{#                        <p>Only images allowed.</p>#}
{#                        <p class="message--desktop">Drop your photo here or browse your computer.</p>#}
{#                        <p class="message--mobile">Tap here to select your picture.</p>#}
{#                    </div>#}
{#                    <div class="message is-wrong-image-size">#}
{#                        <p>Your photo must be larger than 350px.</p>#}
{#                    </div>#}
{#                </div>#}
{#            </div>#}
{##}
{#            <div class="photo__options hide">#}
{#                <div class="photo__zoom">#}
{#                    <input type="range" class="zoom-handler">#}
{#                </div><a href="javascript:;" class="remove"><i class="fa fa-trash"></i></a>#}
{#            </div>#}

    <hr>
    <hr>
    <div class="img-preview"></div>
{#    <img src="" alt="" class="preview previeiew--rounded">#}
{#    <input type="file" name="picture" src="" alt="" class="preview preview--rounded" >#}
{#    <button class="btn btn-default btn-lg" type="submit">Create this event</button>#}
    <button value=Upload onclick='upload_avatar()'>Upload</button>
  </div>
</div><!-- /.container -->

{% endblock %}